# $Id$
#
#---       `huginn' 0.0.0 (c) 1978 by Marcin 'Amok' Konarski      ---
#
# Makefile - this file is integral part of `huginn' project.
#
# i.  You may not make any changes in Copyright information.
# ii. You must attach Copyright information to any part of every copy
#     of this software.
#
#Copyright:
#
# You are free to use this program as is, you can redistribute binary
# package freely but:
#  1. You cannot use any part of sources of this software.
#  2. You cannot redistribute any part of sources of this software.
#  3. No reverse engineering is allowed.
#  4. If you want redistribute binary package you cannot demand any fees
#     for this software.
#     You cannot even demand cost of the carrier (CD for example).
#  5. You cannot include it to any commercial enterprise (for example
#     as a free add-on to payed software or payed newspaper).
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE. Use it at your own risk.

$(eval DIR_ROOT?=$(subst /Makefile.mk.in,,$(lastword $(realpath $(foreach DIR,$(subst /, ,$(CURDIR)), $(eval DIR_ROOT_TEST=$(DIR_ROOT_TEST)/$(DIR))$(DIR_ROOT_TEST)/Makefile.mk.in)))))
PRJNAME        = huginn
VERSION        = 0
SUBVERSION     = 0
EXTRAVERSION   = 0
include $(DIR_ROOT)/_aux/mk/00_sanity.mk
include $(DIR_ROOT)/_aux/mk/10_basic.mk
include $(DIR_BUILD)/configure.mk
override EXTRA_LIBS:= $(filter-out -lncurses,$(filter-out -lyaal_hconsole, $(filter-out -lyaal_hdata,$(EXTRA_LIBS))))

LIBS           = pthread
$(eval $(call NEW_TARGET,huginn,src,,@RDYNAMIC@))
DO_@DO_TARGET@=1
EXEC_NAME    = 1exec

include $(DIR_ROOT)/_aux/inc-helper-pre.mk

override CXXFLAGS+= @DEFS@
override LXXFLAGS+= $(NO_AS_NEEDED)

include $(DIR_ROOT)/_aux/inc-helper-post.mk

CLOU_BIN=$(DIR_BUILD)/$(PRJNAME)/$(EXEC_NAME)
CLOU_CONF=$(DIR_ROOT)/$(PRJNAME)rc
CLOU_SHARE=$(DIR_ROOT)/_deploy/jupyter-deploy $(DIR_ROOT)/src/ihuginn.py $(DIR_ROOT)/src/codemirror.js $(DIR_ROOT)/src/pygment.py $(DIR_ROOT)/src/kernel.json
CLOU_DOC=$(DIR_ROOT)/doc/README $(DIR_ROOT)/doc/COPYRIGHT
CLOU_MAN=$(DIR_ROOT)/build/doc/$(PRJNAME).1

